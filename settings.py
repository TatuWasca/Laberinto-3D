import math
from screeninfo import get_monitors
from decimal import Decimal

# Colors
BLACK = (0, 0, 0)
WHITE = (255, 255, 255)
GREEN = (124, 252, 0)

# Game settings
MONITOR_W, MONITOR_H = get_monitors()[0].width, get_monitors()[0].height
HALF_WIDTH, WIDTH = MONITOR_W // 2, MONITOR_W // 4
HALF_HEIGHT, HEIGHT = MONITOR_H // 2, MONITOR_W // 4
FPS = 60
FONT = 'resources/font/PixeloidMono-VGj6x.ttf'
ICON = 'resources/textures/game_icon.ico'

# Music and sound effects
MENU_MUSIC = 'resources/music/menu_music.mp3'
EFFECT_SOUNDS = {
                'chase_music':     'resources/music/chase_music.mp3',
                'ambient_music':   'resources/music/ambient_music.mp3',
                'ambient1':        'resources/sounds/ambient_noise1.wav',
                'ambient2':        'resources/sounds/ambient_noise2.wav',
                'ambient3':        'resources/sounds/ambient_noise3.wav',
                'npc_scream':      'resources/sounds/npc_scream.wav',
                'running':         'resources/sounds/running.wav',
                'steps':           'resources/sounds/steps.wav'
                }

# Player settings
PLAYER_ANGLE = 0
PLAYER_WALKING_SPEED = 0.001
PLAYER_RUNNING_SPEED = 0.003
PLAYER_ROT_SPEED = 0.002
PLAYER_SIZE_SCALE = 50
STAMINA_ICON = 'resources/textures/stamina_icon.png'

# Mouse settings
MOUSE_SENSITIVITY = 0.00010
MOUSE_MAX_REL = 40
MOUSE_BORDER_LEFT = 100
MOUSE_BORDER_RIGHT = MONITOR_W - MOUSE_BORDER_LEFT

# Raycasting settings
FOV = math.pi / 3
HALF_FOV = FOV / 2
NUM_RAYS = WIDTH // 2 
HALF_NUM_RAYS = NUM_RAYS // 2
DELTA_ANGLE = FOV / NUM_RAYS
MAX_DEPTH = 50

SCREEN_DIST = HALF_WIDTH / math.tan(HALF_FOV)
SCALE = MONITOR_W // NUM_RAYS

# Textures settings
TEXTURE_SIZE = 256
HALF_TEXTURE_SIZE = TEXTURE_SIZE // 2

# NPC settings
MOB_SPEED = Decimal('0.025')

# Map
PLAYER_POS = [()] 
NPC_POS = [()]
EXIT_POS = [()]
DOOR_POS = [()]
KEY_POS = [()]

_ = False
MINI_MAP = [
    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], 
    [1, 3, 2, _, _, _, _, _, 1, _, _, _, _, _, _, _, _, 1, 3, 2, _, _, _, _, 1, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 1], 
    [1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, 1, 1, 1, 1, 1, _, 1, 1, 1, 1, 1, 1, _, 1, _, 1, 1, 1, _, 1, 1, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1], 
    [1, _, _, _, _, _, _, _, 1, _, 1, 3, 2, _, _, _, _, 1, _, _, _, _, _, _, 1, _, _, _, 1, _, 1, _, _, _, _, _, _, 1, 3, 2, _, _, _, _, _, _, _, 1], 
    [1, _, 1, 1, 1, 1, 1, 1, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], 
    [1, _, _, _, 1, _, _, _, _, _, _, _, _, _, _, _, _, 1, _, 1, _, _, 2, 3, 1, _, _, _, 1, _, 1, _, 1, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 1], 
    [1, _, 1, _, 1, _, 1, 1, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, 1, 1, 1, _, 1, 1, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1], 
    [1, _, 1, _, 1, _, 1, 1, 1, _, _, _, 1, _, _, _, _, _, _, 1, _, 1, 1, 1, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, _, _, _, _, _, _, _, _, _, 1, _, 1], 
    [1, _, 1, _, _, _, _, _, 1, 1, 1, _, 1, _, 1, 1, 1, 1, 1, 1, _, _, _, _, _, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1], 
    [1, _, 1, 1, 1, 1, 1, _, 1, _, _, _, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, _, _, _, _, _, 1, _, 1, _, 1], 
    [1, _, 1, _, _, _, 1, _, 1, _, 1, _, 1, _, _, _, _, _, _, _, _, _, _, _, 1, _, _, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, _, 1, _, 1], 
    [1, _, 1, 1, 1, _, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, _, 1, 1, 1, 1, _, 1, 1, 1, 1, 1, 1, _, 1, 2, 1, _, 1, _, 1, _, _, _, _, _, _, _, _, 1, _, 1], 
    [1, _, _, _, _, _, 1, _, 1, _, 1, _, 1, _, _, _, _, _, 1, _, _, _, _, _, _, _, _, _, _, _, 1, 3, 1, _, 1, _, 1, _, 1, 2, 1, 1, _, 1, _, 1, _, 1], 
    [1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, 3, 1, 1, _, 1, _, 1, _, 1], 
    [1, _, _, _, _, _, _, _, 1, _, 1, _, 1, _, _, _, _, _, 1, _, 1, _, _, _, _, _, _, _, _, _, 1, 1, 1, _, 1, _, 1, _, 1, 1, 1, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, 1, 1, 1, 1, _, 1, 2, 1, _, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, 1, 1, 1, _, 1, _, 1, _, 1], 
    [1, _, _, _, 1, _, 1, _, 1, 3, 1, _, 1, _, _, _, _, _, 1, _, 1, _, 1, _, _, _, 1, _, _, _, _, _, _, _, 1, _, 1, _, 1, 1, 3, 1, _, 1, _, 1, _, 1], 
    [1, 1, 1, _, 1, _, 1, _, 1, 1, 1, _, 1, _, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, 1, 2, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, _, 1, _, 1, _, _, _, _, _, 1, _, _, _, _, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, _, _, _, _, _, _, 1, _, _, _, _, _, _, 1, _, 1, _, 1], 
    [1, _, 1, _, _, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, 1, 1], 
    [1, _, 1, 1, 1, 1, 1, _, 1, _, _, _, _, _, _, _, _, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, _, _, _, _, _, _, _, _, _, _, _, 1, _, _, _, 1], 
    [1, _, _, _, _, _, _, _, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1], 
    [1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, _, _, _, _, _, _, _, _, _, _, 1, _, 1, _, 1, _, 1, _, 1, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 1, _, 1],
    [1, _, _, _, _, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, _, 1, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, 1, 1, _, 1, _, 1, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 1, _, _, _, 1, _, _, 1, _, 1, _, _, _, _, _, _, _, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, _, _, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, _, 1, 1, 1, 1, 1, _, 1, 1, 1, _, 1, 1, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, 1, 1, 1, 1, _, 1, _, 1, _, _, _, _, 1, _, 1, _, _, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, _, _, _, _, _, _, 1, _, 1, _, 1], 
    [1, _, _, _, _, _, _, _, _, _, _, _, 1, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, _, _, _, _, 1, _, 1, _, 1, _, 1, _, 1, _, _, _, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, 3, 2, _, _, _, _, _, 1, _, 1, 1, _, 1, _, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, 1, _, 1, _, 1, _, 1, _, 1, _, _, _, _, _, _, _, _, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, _, _, _, _, _, _, _, 1, _, 1, 1, _, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, _, 1, 1, _, 1, _, _, _, 1, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, _, _, _, _, _, _, _, 1, _, 1, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, _, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, 1, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 1, 3, 1, _, _, _, 1, _, 1, _, 1], 
    [1, _, _, _, _, _, _, _, _, _, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1], 
    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, _, _, 1, _, _, _, 1, _, _, _, 1, _, _, _, 1, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 1, _, 1], 
    [1, _, _, _, _, _, _, _, _, _, _, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, _, 1, 1, 1, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, 1, 1, 1, 1, 1, _, 1, 1, 1, 1, _, _, _, 1, _, _, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, _, _, _, _, _, _, _, _, _, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, _, _, _, _, _, _, _, _, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, _, _, _, _, _, _, _, _, _, _, _, 1, _, 1, _, 1, _, 1, _, 1, _, 1, 1, 1, 1, _, _, _, _, _, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, _, _, _, 1, 1, 1, 1, _, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1], 
    [1, _, 1, _, _, _, _, _, _, _, 2, 3, 1, 1, _, _, _, _, _, 1, _, _, _, _, 1, _, 1, _, 1, _, 1, _, _, _, _, _, _, 1, _, 1, _, _, _, 1, _, 1, _, 1], 
    [1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, 1, 1, _, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, 1, 1, 1, 1, _, 1], 
    [1, _, 1, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 1, _, 1, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 1, _, 1, _, _, _, _, _, 1], 
    [1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _, 1, _, 1, _, 1, 2, 1], 
    [1, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, _, 1, _, _, _, 1, 3, 1], 
    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
]

MAP_WIDTH, MAP_HEIGHT = len(MINI_MAP[0]), len(MINI_MAP)